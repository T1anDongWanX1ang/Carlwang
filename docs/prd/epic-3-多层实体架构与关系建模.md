# Epic 3 多层实体架构与关系建模

**Epic目标**: 实现完整的7层实体架构（Topic、Project、Narrative、Marco），建立实体间的复杂关系网络，形成从微观推文到宏观市场的完整数据抽象层次。

## Story 3.1 Topic实体建模与话题聚类

作为数据挖掘专家，
我需要从推文中识别和聚类热门话题，
以便分析市场关注点和讨论趋势。

### Acceptance Criteria
1. 实现推文内容的话题提取算法
2. 建立话题聚类和去重机制
3. 设计Topic实体数据模型和存储结构
4. 实现话题与推文的关联关系建立
5. 计算话题热度和传播范围指标
6. 建立话题生命周期跟踪
7. 提供话题查询和筛选API接口

## Story 3.2 Project实体识别与项目画像

作为项目研究员，
我需要识别推文中提及的crypto项目，
以便分析项目的社区情绪和市场表现。

### Acceptance Criteria
1. 建立crypto项目数据库和基础信息
2. 实现推文中项目实体的自动识别
3. 设计Project实体数据模型
4. 建立项目与推文、话题的关联关系
5. 计算项目社区情绪和讨论活跃度
6. 实现项目分类和标签系统
7. 提供项目数据的CRUD API接口

## Story 3.3 Narrative叙事层级建模

作为市场策略分析师，
我需要识别crypto市场的主要叙事和赛道，
以便分析市场主题和投资热点的演变。

### Acceptance Criteria
1. 定义crypto市场主要叙事分类体系
2. 实现项目到叙事的自动映射算法
3. 设计Narrative实体数据模型
4. 建立叙事与项目、话题的关联关系
5. 计算叙事热度和市场关注度
6. 实现叙事演化趋势分析
7. 提供叙事数据查询和分析接口

## Story 3.4 Marco宏观市场层级

作为宏观分析师，
我需要构建整体市场情绪和关键事件的抽象层，
以便分析市场整体状态和重大事件影响。

### Acceptance Criteria
1. 设计Marco实体作为市场整体抽象
2. 实现市场情绪的聚合计算算法
3. 建立重大事件的自动识别和标注
4. 计算市场整体sentiment_index
5. 实现市场状态的时序分析
6. 建立市场异常事件的检测机制
7. 提供市场整体数据的API接口

## Story 3.5 实体关系网络建立

作为图数据库专家，
我需要建立7个实体间的完整关系网络，
以便支持复杂的关联查询和数据钻取。

### Acceptance Criteria
1. 设计实体关系数据库schema
2. 实现7个实体间的关系映射算法
3. 建立实体关系的权重和强度计算
4. 实现关系网络的实时更新和维护
5. 提供关系图查询和遍历API
6. 实现关系网络的可视化数据输出
7. 建立关系质量验证和异常检测

## Story 3.6 跨层级数据一致性保障

作为系统架构师，
我需要确保7层实体数据的一致性和完整性，
以便维护数据质量和系统可靠性。

### Acceptance Criteria
1. 建立实体数据的一致性检查机制
2. 实现跨实体的事务管理
3. 建立数据完整性约束和验证规则
4. 实现数据同步和更新传播机制
5. 建立数据冲突检测和解决策略
6. 实现数据回滚和修复功能
7. 提供数据一致性监控和报告
