# Requirements

## Functional

**数据采集与处理需求：**

1. **FR1**: 系统必须支持Twitter API v2集成，实现实时推文数据采集，日处理量达到1000万条推文
2. **FR2**: 系统必须实现7个核心实体的数据建模：Tweet、Topic、User、KOL、Project、Narrative、Marco
3. **FR3**: 系统必须建立实体间关系映射，支持从Tweet到Marco的完整数据链路追踪
4. **FR4**: 系统必须提供数据清洗功能，自动过滤垃圾推文、bot账号和无关内容

**智能分析需求：**

5. **FR5**: 系统必须集成LLM模型，提供crypto专业语境的情感分析，准确率≥85%
6. **FR6**: 系统必须实现推文重要性智能识别，区分广告内容和有价值观点
7. **FR7**: 系统必须支持实体自动识别和分类，包括KOL类型（founder/influencer/investor）
8. **FR8**: 系统必须提供多语言文本的AI总结功能，生成简洁的观点摘要

**核心指标计算需求：**

9. **FR9**: 系统必须实现sentiment_index指标，覆盖所有7个实体层级的情感计算
10. **FR10**: 系统必须实现popularity指标，基于推文数量、互动数据和传播速度计算热度
11. **FR11**: 系统必须实现summary指标，为每个实体提供AI生成的观点总结
12. **FR12**: 系统必须支持KOL喊单效果追踪，计算1h/24h/3d/7d的涨跌幅准确率

**实时分析需求：**

13. **FR13**: 系统必须提供实时传播分析，追踪话题5分钟/1小时/4小时的传播速度
14. **FR14**: 系统必须支持实时情感变化监控，数据延迟≤30秒
15. **FR15**: 系统必须提供异常情感波动的自动预警功能

**API服务需求：**

16. **FR16**: 系统必须提供RESTful API，支持所有7个实体的CRUD操作
17. **FR17**: 系统必须提供WebSocket实时推送服务，支持重要事件的即时通知
18. **FR18**: 系统必须支持API认证和授权，基于API Key和配额管理
19. **FR19**: 系统必须提供API文档和SDK，支持Python、JavaScript、Go客户端集成

**历史数据需求：**

20. **FR20**: 系统必须支持所有核心指标的历史数据存储，保存期限≥24个月
21. **FR21**: 系统必须提供历史数据查询接口，支持时间范围和实体类型筛选
22. **FR22**: 系统必须支持数据导出功能，提供CSV、JSON等格式

## Non Functional

**性能需求：**

1. **NFR1**: API响应时间95%的请求必须≤200ms
2. **NFR2**: 系统必须支持10,000+ QPS的并发API请求
3. **NFR3**: 实时数据处理延迟必须≤30秒（从Twitter数据到结构化输出）
4. **NFR4**: LLM推理批处理优化，单次推理成本控制在预算范围内

**可用性需求：**

5. **NFR5**: 系统可用性必须≥99.9%，支持多区域容灾部署
6. **NFR6**: 系统必须支持自动故障转移和服务降级机制
7. **NFR7**: 关键服务中断时，必须在5分钟内恢复基础功能

**扩展性需求：**

8. **NFR8**: 系统架构必须支持水平扩展，组件无状态设计
9. **NFR9**: 数据存储必须支持按时间和地理区域分片
10. **NFR10**: 系统必须支持新实体类型的动态扩展

**安全合规需求：**

11. **NFR11**: 所有数据传输必须使用TLS 1.3加密
12. **NFR12**: 静态数据必须加密存储，符合GDPR和CCPA要求
13. **NFR13**: API访问必须支持基于角色的细粒度权限控制
14. **NFR14**: 系统必须提供完整的审计日志和访问记录

**成本控制需求：**

15. **NFR15**: 云计算资源必须支持基于负载的自动伸缩
16. **NFR16**: GPU推理成本必须通过批处理和缓存策略优化
17. **NFR17**: 存储成本必须采用热温冷数据分层策略
18. **NFR18**: 总运营成本必须控制在收入的25%以内，确保75%毛利率
